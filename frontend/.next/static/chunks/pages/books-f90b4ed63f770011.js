(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{1809:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/books",function(){return s(7296)}])},7073:function(e,t,s){"use strict";var r=s(5893);s(7294),t.Z=e=>{let{children:t,variant:s="primary",size:n="md",className:o="",disabled:a=!1,type:c="button",onClick:l,...i}=e,d="".concat("btn inline-flex items-center justify-center rounded-md font-medium transition-all focus:outline-none"," ").concat({primary:"btn-primary",secondary:"btn-secondary",outline:"btn-outline"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-5 py-2.5 text-lg"}[n]," ").concat(a?"opacity-50 cursor-not-allowed":""," ").concat(o);return(0,r.jsx)("button",{type:c,className:d,disabled:a,onClick:l,...i,children:t})}},7607:function(e,t,s){"use strict";var r=s(5893);s(7294),t.Z=e=>{let{children:t,className:s="",...n}=e;return(0,r.jsx)("div",{className:"card ".concat(s),...n,children:t})}},5574:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(5893);s(7294);var n=s(1664),o=s.n(n),a=s(1163),c=s(6266),l=()=>{let{user:e,logout:t,isAuthenticated:s}=(0,c.aC)(),n=(0,a.useRouter)();return(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o(),{href:"/",className:"flex-shrink-0 flex items-center",children:(0,r.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"BookPilot"})}),s&&(0,r.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:(0,r.jsx)(o(),{href:"/books",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(n.pathname.startsWith("/books")?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"),children:"My Books"})})]}),(0,r.jsx)("div",{className:"flex items-center",children:s?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-sm text-secondary-700",children:null==e?void 0:e.email}),(0,r.jsx)("button",{onClick:t,className:"text-sm text-secondary-500 hover:text-secondary-700",children:"Logout"})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(o(),{href:"/auth/login",className:"text-sm text-secondary-500 hover:text-secondary-700",children:"Login"}),(0,r.jsx)(o(),{href:"/auth/register",className:"text-sm bg-primary-600 text-white px-3 py-2 rounded-md hover:bg-primary-700",children:"Register"})]})})]})})})},i=e=>{let{children:t}=e;return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(l,{}),(0,r.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:t}),(0,r.jsx)("footer",{className:"bg-white border-t border-secondary-200 py-6",children:(0,r.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("p",{className:"text-center text-sm text-secondary-500",children:["\xa9 ",new Date().getFullYear()," BookPilot. All rights reserved."]})})})]})}},6266:function(e,t,s){"use strict";s.d(t,{aC:function(){return o}}),s(5893);var r=s(7294);s(1163);let n=(0,r.createContext)({isAuthenticated:!1,user:null,login:()=>{},logout:()=>{},loading:!0}),o=()=>{let e=(0,r.useContext)(n);return void 0===e?{isAuthenticated:!1,user:null,login:()=>{},logout:()=>{},loading:!0}:e}},7296:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(5893),n=s(7294),o=s(1163),a=s(5574),c=s(7607),l=s(7073),i=s(5675),d=s.n(i),u=s(1664),x=s.n(u),m=e=>{let{book:t}=e;return(0,r.jsxs)(c.Z,{className:"h-full flex flex-col",children:[(0,r.jsx)("div",{className:"relative h-40 bg-secondary-100 rounded-t-lg mb-4",children:"processed"===t.status?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(d(),{src:"/book-cover.svg",alt:t.title,width:100,height:120,className:"object-cover"})}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-16 h-16 text-secondary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-1 line-clamp-1",children:t.title}),t.author&&(0,r.jsxs)("p",{className:"text-sm text-secondary-600 mb-2",children:["by ",t.author]}),(0,r.jsx)("div",{className:"flex items-center mb-3",children:(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat({uploaded:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",processed:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800"}[t.status]||"bg-secondary-100 text-secondary-800"),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})})]}),(0,r.jsx)("div",{className:"mt-4",children:"processed"===t.status?(0,r.jsx)(x(),{href:"/guides/".concat(t.id),className:"btn btn-primary w-full py-2",children:"View Guide"}):"error"===t.status?(0,r.jsx)(x(),{href:"/books/".concat(t.id,"/process"),className:"btn btn-outline w-full py-2",children:"Retry Processing"}):(0,r.jsx)("button",{className:"btn btn-secondary w-full py-2 opacity-75 cursor-not-allowed",disabled:!0,children:"processing"===t.status?"Processing...":"Awaiting Processing"})})]})},h=s(6266),p=s(4446),g=()=>{let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0),[d,u]=(0,n.useState)(""),{isAuthenticated:x}=(0,h.aC)(),g=(0,o.useRouter)();(0,n.useEffect)(()=>{if(!x){g.push("/auth/login");return}f()},[x,g]);let f=async()=>{try{i(!0);let e=await p.VB.getBooks();t(e.data),u("")}catch(e){console.error("Error fetching books:",e),u("Failed to load books. Please try again.")}finally{i(!1)}};return(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"My Books"}),(0,r.jsx)(l.Z,{onClick:()=>g.push("/books/upload"),variant:"primary",children:"Upload Book"})]}),d&&(0,r.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-md mb-6",children:d}),s?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("p",{className:"text-secondary-500",children:"Loading books..."})}):0===e.length?(0,r.jsxs)(c.Z,{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-xl font-medium text-secondary-700 mb-2",children:"No books yet"}),(0,r.jsx)("p",{className:"text-secondary-500 mb-6",children:"Upload your first book to get started with BookPilot."}),(0,r.jsx)(l.Z,{onClick:()=>g.push("/books/upload"),variant:"primary",children:"Upload Book"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsx)(m,{book:e},e.id))})]})}},4446:function(e,t,s){"use strict";s.d(t,{Hm:function(){return l},R2:function(){return i},VB:function(){return c}});var r=s(7066),n=s(3454);let o=n.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",a=r.Z.create({baseURL:o,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let c={getBooks:()=>a.get("/books"),getBook:e=>a.get("/books/".concat(e)),uploadBook:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new FormData;return r.append("title",e),s&&r.append("author",s),r.append("file",t),a.post("/books",r,{headers:{"Content-Type":"multipart/form-data"}})},processBook:e=>a.post("/books/".concat(e,"/process")),deleteBook:e=>a.delete("/books/".concat(e))},l={getGuide:e=>a.get("/guides/".concat(e)),updateProgress:(e,t)=>a.patch("/guides/".concat(e,"/progress"),t),getQuiz:e=>a.get("/guides/".concat(e,"/quiz")),submitQuizResults:(e,t)=>a.post("/guides/".concat(e,"/quiz/results"),t),exportGuide:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";return a.post("/guides/".concat(e,"/export"),{format:t})}},i={getMessages:e=>a.get("/chat/".concat(e,"/messages")),sendMessage:(e,t)=>a.post("/chat/".concat(e,"/messages"),t)}}},function(e){e.O(0,[774,424,66,675,888,179],function(){return e(e.s=1809)}),_N_E=e.O()}]);