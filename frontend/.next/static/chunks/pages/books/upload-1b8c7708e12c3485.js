(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[601],{2664:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/books/upload",function(){return s(8856)}])},7073:function(e,t,s){"use strict";var r=s(5893);s(7294),t.Z=e=>{let{children:t,variant:s="primary",size:a="md",className:n="",disabled:o=!1,type:l="button",onClick:i,...c}=e,d="".concat("btn inline-flex items-center justify-center rounded-md font-medium transition-all focus:outline-none"," ").concat({primary:"btn-primary",secondary:"btn-secondary",outline:"btn-outline"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-5 py-2.5 text-lg"}[a]," ").concat(o?"opacity-50 cursor-not-allowed":""," ").concat(n);return(0,r.jsx)("button",{type:l,className:d,disabled:o,onClick:i,...c,children:t})}},7607:function(e,t,s){"use strict";var r=s(5893);s(7294),t.Z=e=>{let{children:t,className:s="",...a}=e;return(0,r.jsx)("div",{className:"card ".concat(s),...a,children:t})}},5759:function(e,t,s){"use strict";var r=s(5893);s(7294),t.Z=e=>{let{label:t,type:s="text",id:a,name:n,value:o,onChange:l,placeholder:i,error:c,required:d=!1,className:u="",...x}=e;return(0,r.jsxs)("div",{className:"mb-4 ".concat(u),children:[t&&(0,r.jsxs)("label",{htmlFor:a,className:"label",children:[t," ",d&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:s,id:a,name:n,value:o,onChange:l,placeholder:i,required:d,className:"input ".concat(c?"border-red-500 focus:border-red-500 focus:ring-red-500":""),...x}),c&&(0,r.jsx)("p",{className:"error",children:c})]})}},5574:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(5893);s(7294);var a=s(1664),n=s.n(a),o=s(1163),l=s(6266),i=()=>{let{user:e,logout:t,isAuthenticated:s}=(0,l.aC)(),a=(0,o.useRouter)();return(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n(),{href:"/",className:"flex-shrink-0 flex items-center",children:(0,r.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"BookPilot"})}),s&&(0,r.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:(0,r.jsx)(n(),{href:"/books",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(a.pathname.startsWith("/books")?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"),children:"My Books"})})]}),(0,r.jsx)("div",{className:"flex items-center",children:s?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-sm text-secondary-700",children:null==e?void 0:e.email}),(0,r.jsx)("button",{onClick:t,className:"text-sm text-secondary-500 hover:text-secondary-700",children:"Logout"})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/auth/login",className:"text-sm text-secondary-500 hover:text-secondary-700",children:"Login"}),(0,r.jsx)(n(),{href:"/auth/register",className:"text-sm bg-primary-600 text-white px-3 py-2 rounded-md hover:bg-primary-700",children:"Register"})]})})]})})})},c=e=>{let{children:t}=e;return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(i,{}),(0,r.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:t}),(0,r.jsx)("footer",{className:"bg-white border-t border-secondary-200 py-6",children:(0,r.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("p",{className:"text-center text-sm text-secondary-500",children:["\xa9 ",new Date().getFullYear()," BookPilot. All rights reserved."]})})})]})}},6266:function(e,t,s){"use strict";s.d(t,{aC:function(){return n}}),s(5893);var r=s(7294);s(1163);let a=(0,r.createContext)({isAuthenticated:!1,user:null,login:()=>{},logout:()=>{},loading:!0}),n=()=>{let e=(0,r.useContext)(a);return void 0===e?{isAuthenticated:!1,user:null,login:()=>{},logout:()=>{},loading:!0}:e}},8856:function(e,t,s){"use strict";s.r(t);var r=s(5893),a=s(7294),n=s(1163),o=s(2002),l=s(5574),i=s(7607),c=s(5759),d=s(7073),u=s(6266),x=s(4446);t.default=()=>{let[e,t]=(0,a.useState)(""),[s,m]=(0,a.useState)(""),[p,h]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),[f,j]=(0,a.useState)(""),{isAuthenticated:y}=(0,u.aC)(),v=(0,n.useRouter)(),{getRootProps:N,getInputProps:k,isDragActive:B}=(0,o.uI)({onDrop:s=>{if(s&&s.length>0&&(h(s[0]),!e)){let e=s[0].name.split(".").slice(0,-1).join(".");t(e)}},accept:{"application/pdf":[".pdf"],"application/epub+zip":[".epub"],"text/plain":[".txt"]},maxFiles:1,maxSize:52428800}),w=async t=>{if(t.preventDefault(),!p){j("Please select a file to upload");return}j(""),g(!0);try{await x.VB.uploadBook(e,p,s||null),v.push("/books")}catch(e){console.error("Error uploading book:",e),j("Failed to upload book. Please try again.")}finally{g(!1)}};return(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Upload a Book"}),(0,r.jsx)(i.Z,{children:(0,r.jsxs)("form",{onSubmit:w,children:[f&&(0,r.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md mb-4",children:f}),(0,r.jsx)(c.Z,{label:"Book Title",id:"title",value:e,onChange:e=>t(e.target.value),placeholder:"Enter book title",required:!0}),(0,r.jsx)(c.Z,{label:"Author (optional)",id:"author",value:s,onChange:e=>m(e.target.value),placeholder:"Enter author name"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"label",children:"Book File"}),(0,r.jsxs)("div",{...N(),className:"border-2 border-dashed rounded-md p-6 text-center cursor-pointer transition-colors ".concat(B?"border-primary-500 bg-primary-50":p?"border-green-500 bg-green-50":"border-secondary-300 hover:border-primary-500 hover:bg-primary-50"),children:[(0,r.jsx)("input",{...k()}),p?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-600 font-medium",children:p.name}),(0,r.jsxs)("p",{className:"text-secondary-500 text-sm mt-1",children:[(p.size/1024/1024).toFixed(2)," MB"]})]}):B?(0,r.jsx)("p",{className:"text-primary-600",children:"Drop the file here..."}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-secondary-600",children:"Drag & drop a book file here, or click to select"}),(0,r.jsx)("p",{className:"text-secondary-500 text-sm mt-1",children:"Supported formats: PDF, EPUB, TXT (max 50MB)"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(d.Z,{type:"button",variant:"outline",onClick:()=>v.push("/books"),disabled:b,children:"Cancel"}),(0,r.jsx)(d.Z,{type:"submit",variant:"primary",disabled:b||!e||!p,children:b?"Uploading...":"Upload Book"})]})]})})]})})}},4446:function(e,t,s){"use strict";s.d(t,{Hm:function(){return i},R2:function(){return c},VB:function(){return l}});var r=s(7066),a=s(3454);let n=a.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",o=r.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let l={getBooks:()=>o.get("/books"),getBook:e=>o.get("/books/".concat(e)),uploadBook:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new FormData;return r.append("title",e),s&&r.append("author",s),r.append("file",t),o.post("/books",r,{headers:{"Content-Type":"multipart/form-data"}})},processBook:e=>o.post("/books/".concat(e,"/process")),deleteBook:e=>o.delete("/books/".concat(e))},i={getGuide:e=>o.get("/guides/".concat(e)),updateProgress:(e,t)=>o.patch("/guides/".concat(e,"/progress"),t),getQuiz:e=>o.get("/guides/".concat(e,"/quiz")),submitQuizResults:(e,t)=>o.post("/guides/".concat(e,"/quiz/results"),t),exportGuide:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";return o.post("/guides/".concat(e,"/export"),{format:t})}},c={getMessages:e=>o.get("/chat/".concat(e,"/messages")),sendMessage:(e,t)=>o.post("/chat/".concat(e,"/messages"),t)}}},function(e){e.O(0,[774,424,66,2,888,179],function(){return e(e.s=2664)}),_N_E=e.O()}]);