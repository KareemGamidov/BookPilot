(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{7501:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/[bookId]",function(){return t(3501)}])},7073:function(e,s,t){"use strict";var r=t(5893);t(7294),s.Z=e=>{let{children:s,variant:t="primary",size:a="md",className:n="",disabled:l=!1,type:c="button",onClick:i,...o}=e,d="".concat("btn inline-flex items-center justify-center rounded-md font-medium transition-all focus:outline-none"," ").concat({primary:"btn-primary",secondary:"btn-secondary",outline:"btn-outline"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-5 py-2.5 text-lg"}[a]," ").concat(l?"opacity-50 cursor-not-allowed":""," ").concat(n);return(0,r.jsx)("button",{type:c,className:d,disabled:l,onClick:i,...o,children:s})}},7607:function(e,s,t){"use strict";var r=t(5893);t(7294),s.Z=e=>{let{children:s,className:t="",...a}=e;return(0,r.jsx)("div",{className:"card ".concat(t),...a,children:s})}},5574:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var r=t(5893);t(7294);var a=t(1664),n=t.n(a),l=t(1163),c=t(6266),i=()=>{let{user:e,logout:s,isAuthenticated:t}=(0,c.aC)(),a=(0,l.useRouter)();return(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n(),{href:"/",className:"flex-shrink-0 flex items-center",children:(0,r.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"BookPilot"})}),t&&(0,r.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:(0,r.jsx)(n(),{href:"/books",className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ".concat(a.pathname.startsWith("/books")?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"),children:"My Books"})})]}),(0,r.jsx)("div",{className:"flex items-center",children:t?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-sm text-secondary-700",children:null==e?void 0:e.email}),(0,r.jsx)("button",{onClick:s,className:"text-sm text-secondary-500 hover:text-secondary-700",children:"Logout"})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/auth/login",className:"text-sm text-secondary-500 hover:text-secondary-700",children:"Login"}),(0,r.jsx)(n(),{href:"/auth/register",className:"text-sm bg-primary-600 text-white px-3 py-2 rounded-md hover:bg-primary-700",children:"Register"})]})})]})})})},o=e=>{let{children:s}=e;return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(i,{}),(0,r.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:s}),(0,r.jsx)("footer",{className:"bg-white border-t border-secondary-200 py-6",children:(0,r.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("p",{className:"text-center text-sm text-secondary-500",children:["\xa9 ",new Date().getFullYear()," BookPilot. All rights reserved."]})})})]})}},6266:function(e,s,t){"use strict";t.d(s,{aC:function(){return n}}),t(5893);var r=t(7294);t(1163);let a=(0,r.createContext)({isAuthenticated:!1,user:null,login:()=>{},logout:()=>{},loading:!0}),n=()=>{let e=(0,r.useContext)(a);return void 0===e?{isAuthenticated:!1,user:null,login:()=>{},logout:()=>{},loading:!0}:e}},3501:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var r=t(5893),a=t(7294),n=t(1163),l=t(5574),c=t(7607),i=t(7073),o=e=>{let{total:s,completed:t,className:a=""}=e,n=s>0?Math.round(t/s*100):0;return(0,r.jsxs)("div",{className:"w-full ".concat(a),children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-secondary-700",children:"Progress"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-secondary-700",children:[n,"%"]})]}),(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"progress-value",style:{width:"".concat(n,"%")}})})]})},d=t(6266),m=t(4446),x=()=>{var e,s,t,x;let[u,h]=(0,a.useState)(null),[p,b]=(0,a.useState)(null),[g,j]=(0,a.useState)(!0),[y,f]=(0,a.useState)(""),[v,N]=(0,a.useState)("chapters"),[k,w]=(0,a.useState)(0),{isAuthenticated:_}=(0,d.aC)(),C=(0,n.useRouter)(),{bookId:z}=C.query;(0,a.useEffect)(()=>{if(!_){C.push("/auth/login");return}z&&q()},[_,z,C]);let q=async()=>{try{j(!0);let[e,s]=await Promise.all([m.Hm.getGuide(z),m.VB.getBook(z)]);h(e.data),b(s.data),f("")}catch(e){console.error("Error fetching guide:",e),f("Failed to load guide. Please try again.")}finally{j(!1)}},B=async e=>{if(u)try{let s=[...u.progress.completed_chapters];s.includes(e)||s.push(e),await m.Hm.updateProgress(z,{completed_chapters:s}),h({...u,progress:{...u.progress,completed_chapters:s}})}catch(e){console.error("Error updating progress:",e)}},Z=async()=>{try{await m.Hm.exportGuide(z,"pdf"),alert("Guide exported successfully! Download would start in a real implementation.")}catch(e){console.error("Error exporting guide:",e),alert("Failed to export guide. Please try again.")}};if(g)return(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("p",{className:"text-secondary-500",children:"Loading guide..."})})});if(y)return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-md mb-6",children:y}),(0,r.jsx)(i.Z,{variant:"outline",onClick:()=>C.push("/books"),children:"Back to Books"})]});if(!u||!p)return(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-xl font-medium text-secondary-700 mb-2",children:"Guide not found"}),(0,r.jsx)("p",{className:"text-secondary-500 mb-6",children:"The guide you're looking for doesn't exist or is still being processed."}),(0,r.jsx)(i.Z,{variant:"outline",onClick:()=>C.push("/books"),children:"Back to Books"})]})});let P=u.json_content,R=u.progress;return P.chapters.length>0&&(R.completed_chapters.length,P.chapters.length),(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:P.title}),P.author&&(0,r.jsxs)("p",{className:"text-secondary-600",children:["by ",P.author]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(i.Z,{variant:"outline",onClick:()=>{C.push("/chat/".concat(z))},children:"Chat with Book"}),(0,r.jsx)(i.Z,{variant:"primary",onClick:Z,children:"Export Guide"})]})]}),(0,r.jsx)(o,{total:P.chapters.length,completed:R.completed_chapters.length,className:"mb-6"}),(0,r.jsx)("div",{className:"border-b border-secondary-200 mb-6",children:(0,r.jsxs)("nav",{className:"flex space-x-8",children:[(0,r.jsx)("button",{onClick:()=>N("chapters"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("chapters"===v?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"),children:"Chapters"}),(0,r.jsx)("button",{onClick:()=>N("synthesis"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("synthesis"===v?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"),children:"Synthesis"}),(0,r.jsx)("button",{onClick:()=>N("quiz"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("quiz"===v?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"),children:"Quiz"})]})}),"chapters"===v&&(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"md:col-span-1",children:(0,r.jsxs)(c.Z,{className:"sticky top-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Table of Contents"}),(0,r.jsx)("ul",{className:"space-y-2",children:P.toc.map((e,s)=>(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>w(s),className:"w-full text-left px-3 py-2 rounded-md ".concat(k===s?"bg-primary-50 text-primary-700":"hover:bg-secondary-50"," ").concat(R.completed_chapters.includes(s)?"font-medium":""),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:R.completed_chapters.includes(s)?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,r.jsx)("span",{className:"w-4 h-4 inline-block"})}),e]})})},s))})]})}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:(null===(e=P.chapters[k])||void 0===e?void 0:e.title)||"Chapter"}),(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Summary"}),(0,r.jsx)("p",{className:"mb-6",children:null===(s=P.chapters[k])||void 0===s?void 0:s.summary}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Reflective Questions"}),(0,r.jsx)("ul",{className:"list-disc pl-5 mb-6",children:null===(t=P.chapters[k])||void 0===t?void 0:t.questions.map((e,s)=>(0,r.jsx)("li",{className:"mb-2",children:e},s))}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Actionable Task"}),(0,r.jsx)("div",{className:"bg-primary-50 p-4 rounded-md border border-primary-100 mb-6",children:(0,r.jsx)("p",{className:"text-primary-800",children:null===(x=P.chapters[k])||void 0===x?void 0:x.task})})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,r.jsx)(i.Z,{variant:"outline",onClick:()=>k>0&&w(k-1),disabled:0===k,children:"Previous Chapter"}),R.completed_chapters.includes(k)?(0,r.jsx)(i.Z,{variant:"secondary",onClick:()=>k<P.chapters.length-1&&w(k+1),disabled:k===P.chapters.length-1,children:"Next Chapter"}):(0,r.jsx)(i.Z,{variant:"primary",onClick:()=>{B(k),k<P.chapters.length-1&&w(k+1)},children:"Mark as Complete"})]})]})})]})}),"synthesis"===v&&(0,r.jsxs)(c.Z,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Synthesis"}),(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Key Takeaways"}),(0,r.jsx)("ul",{className:"list-disc pl-5 mb-6",children:P.synthesis.key_takeaways.map((e,s)=>(0,r.jsx)("li",{className:"mb-2",children:e},s))}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Action Plan"}),(0,r.jsx)("div",{className:"bg-primary-50 p-4 rounded-md border border-primary-100",children:(0,r.jsx)("p",{className:"text-primary-800 whitespace-pre-line",children:P.synthesis.action_plan})})]})]}),"quiz"===v&&(0,r.jsxs)(c.Z,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Knowledge Check"}),(0,r.jsx)("div",{className:"space-y-8",children:P.quiz.map((e,s)=>(0,r.jsxs)("div",{className:"border-b border-secondary-200 pb-6 last:border-0",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-3",children:["Question ",s+1]}),(0,r.jsx)("p",{className:"mb-4",children:e.question}),(0,r.jsx)("div",{className:"space-y-3",children:e.options.map((t,a)=>(0,r.jsx)("div",{className:"p-3 rounded-md border cursor-pointer ".concat(R.quiz_results&&R.quiz_results[s]===a?a===e.correct_answer?"bg-green-50 border-green-200":"bg-red-50 border-red-200":"border-secondary-200 hover:border-primary-300 hover:bg-primary-50"),onClick:()=>{if(!R.quiz_results){let e={};e[s]=a,m.Hm.updateProgress(z,{quiz_results:e}),h({...u,progress:{...u.progress,quiz_results:e}})}},children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border flex items-center justify-center ".concat(R.quiz_results&&R.quiz_results[s]===a?a===e.correct_answer?"bg-green-500 border-green-500":"bg-red-500 border-red-500":"border-secondary-300"),children:R.quiz_results&&R.quiz_results[s]===a&&(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a===e.correct_answer?(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}):(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}),(0,r.jsx)("span",{className:"ml-3",children:t})]})},a))}),R.quiz_results&&void 0!==R.quiz_results[s]&&(0,r.jsx)("div",{className:"mt-4 p-3 rounded-md ".concat(R.quiz_results[s]===e.correct_answer?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:R.quiz_results[s]===e.correct_answer?"Correct! Well done.":"Incorrect. The correct answer is: ".concat(e.options[e.correct_answer])})]},s))})]})]})})}},4446:function(e,s,t){"use strict";t.d(s,{Hm:function(){return i},R2:function(){return o},VB:function(){return c}});var r=t(7066),a=t(3454);let n=a.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",l=r.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e));let c={getBooks:()=>l.get("/books"),getBook:e=>l.get("/books/".concat(e)),uploadBook:function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new FormData;return r.append("title",e),t&&r.append("author",t),r.append("file",s),l.post("/books",r,{headers:{"Content-Type":"multipart/form-data"}})},processBook:e=>l.post("/books/".concat(e,"/process")),deleteBook:e=>l.delete("/books/".concat(e))},i={getGuide:e=>l.get("/guides/".concat(e)),updateProgress:(e,s)=>l.patch("/guides/".concat(e,"/progress"),s),getQuiz:e=>l.get("/guides/".concat(e,"/quiz")),submitQuizResults:(e,s)=>l.post("/guides/".concat(e,"/quiz/results"),s),exportGuide:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";return l.post("/guides/".concat(e,"/export"),{format:s})}},o={getMessages:e=>l.get("/chat/".concat(e,"/messages")),sendMessage:(e,s)=>l.post("/chat/".concat(e,"/messages"),s)}}},function(e){e.O(0,[774,424,66,888,179],function(){return e(e.s=7501)}),_N_E=e.O()}]);